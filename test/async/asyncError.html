<script src="https://cdn.jsdelivr.net/gh/orstavik/parse@v1.0.2/parse.js"></script>
<script src="https://cdn.jsdelivr.net/gh/orstavik/ElementObserver/constructionFrame.js"></script>
<script src="../../src/customAttributes.js"></script>

<h1 click:hello:sunshine error:log>hello sunshine</h1>
<script>
  (async function () {

    async function reaction(e, prefix) {
      await new Promise(r => setTimeout(r, 100));
      console.log(prefix);
      return e;
    }

    async function error() {
      await new Promise(r => setTimeout(r, 100));
      throw "some async error";
    }

    function log(e){
      console.log(e.reaction, e.async, e.error);
    }

    customReactions.define("hello", error);
    customReactions.define("sunshine", reaction);
    customReactions.define("log", log);
    const h1 = document.querySelector("h1");
    h1.click();
  })();
</script>
