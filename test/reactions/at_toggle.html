<script src="../../src/customAttributes.js"></script>
<script src="https://cdn.jsdelivr.net/gh/orstavik/ElementObserver@1.1.0/startObserver.js"></script>
<script src="../../src/lib.js"></script>

<style>
  div:not([open]) > :not(h1) {
    display: none;
  }
</style>

<div toggle:log_display:open:log_display>
  <h1 click:toggle>hello</h1>
  <p>sunshine</p>
  <p>world</p>
</div>

<script type="module">
  customReactions.defineAll({
    "open": lib.toggleAttr,
    "toggle": lib.newEvent,
    "log": function log(e) {
      console.log(getComputedStyle(this.ownerElement.children[1]).display); return e;
    }
  });

  document.querySelector("h1").click();
</script>