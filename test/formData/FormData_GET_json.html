<script src="https://cdn.jsdelivr.net/gh/orstavik/ElementObserver@1.1.2/observeElementCreation.js"></script>
<script src="../../src/customAttributes.js"></script>

<form
    action="http://foo.com" method="post"
    click:formdata::get="https://jsonplaceholder.typicode.com/todos/1"
    auxclick:formdata::encodeuri:json_load="https://jsonplaceholder.typicode.com/todos/1"
    get:log
    load:log>
  <div><input name="hello" type="text" value="asds"></div>
  <input name="sunshine" type="text" value="312312">
  <input type="submit">
</form>

<script type="module">
  import {FormData_GET, formDataToUri, fetchAndEvent} from "../src/FormData/FormData_GET.js";
  import {DOM_FormData} from "../src/FormData/DOM_FormData.js";

  customReactions.defineAll({
    "formdata": DOM_FormData,
    "get": function (e, _, ...args) {
      return FormData_GET.call(this, e, "get", ...args);
    },
    "encodeuri": formDataToUri,
    "json": function (e, _, ...args) {
      return fetchAndEvent.call(this, e, "json", ...args);
    },
    "log": e => (console.log(e.detail), e)
  });

  document.querySelector("form").click();
  document.querySelector("form").dispatchEvent(new MouseEvent("auxclick"));
</script>