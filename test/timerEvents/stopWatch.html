<script src="https://cdn.jsdelivr.net/gh/orstavik/ElementObserver@1.1.2/observeElementCreation.js"></script>
<script src="../../src/customAttributes.js"></script>
<script src="../../src/dotReaction.js"></script>
<script src="../../src/core.js"></script>

<body test:stopwatch_e.time-stamp:math.min_i_25:console.log_i>

<script>
  //a diff/aggregator of sorts. same as throttle. It joins the output of many different events across async time.
  const stopWatches = new WeakMap();
  customReactions.define("stopwatch", function stopwatch(_, timeStamp) {
    const lastTime = stopWatches.get(this) || timeStamp;
    stopWatches.set(this, timeStamp);
    return timeStamp - lastTime;
  });
</script>

<h1
    :new_-event_test:dispatch
    :await_200:new_-event_test:dispatch
    :await_400:new_-event_test:dispatch>hello sunshine</h1>
</body>